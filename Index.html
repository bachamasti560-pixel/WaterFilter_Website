<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PureFlow Pakistan | Water Filtration Solutions</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    
    <style>
        /* CSS is now English-only */
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a4d7d;
        }
        
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(26, 77, 125, 0.9); 
            z-index: -1;
        }

        .header-bg {
            background-color: rgba(0, 77, 115, 0.95);
            backdrop-filter: blur(5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }
        .card {
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), box-shadow 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            border: none;
            border-radius: 1.5rem;
            background-color: rgba(255, 255, 255, 0.98);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        .card:hover {
            transform: translateY(-12px);
            box-shadow: 0 25px 50px -12px rgba(0, 184, 233, 0.6);
        }
        .section-title {
            color: #00b8e9;
            border-bottom-color: #00b8e9;
        }
        
        .primary-button {
            background-color: #00b8e9;
            background-image: linear-gradient(to right, #004d73, #00b8e9);
            transition: all 0.4s ease;
            box-shadow: 0 4px 15px rgba(0, 184, 233, 0.2);
        }
        .primary-button:hover {
            box-shadow: 0 8px 20px rgba(0, 184, 233, 0.4);
            transform: translateY(-2px) scale(1.02);
        }

        .card-button {
            background-color: #00b8e9;
            transition: all 0.3s ease;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: 0 2px 8px rgba(0, 184, 233, 0.4);
        }
        .card-button:hover {
            background-color: #004d73;
            transform: scale(1.08);
            box-shadow: 0 4px 15px rgba(0, 184, 233, 0.6);
        }

        .footer-bg {
            background-color: #021625;
        }
        
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.75);
            transition: opacity 0.3s ease;
        }

        .image-container {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f0f9ff; 
        }
        
        .placeholder-text {
            color: #004d73;
            font-weight: 700;
            text-align: center;
            padding: 1rem;
        }

        /* --- Theme Styles (Deals & Banners) --- */

        .pak-flag-banner {
            background-image: url('https://placehold.co/1200x200/006847/ffffff?text=PAKISTAN+FLAG'); 
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
            overflow: hidden;
            border-radius: 1.5rem;
        }

        .pak-flag-overlay {
            background-color: rgba(0, 104, 71, 0.85);
            backdrop-filter: blur(1px);
        }

        .special-deal-card {
            background: linear-gradient(135deg, #00b8e9 0%, #004d73 100%);
            border: 4px solid #fff;
            box-shadow: 0 10px 30px rgba(0, 184, 233, 0.6);
            animation: pulse 2s infinite alternate;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 10px 30px rgba(0, 184, 233, 0.6); }
            100% { transform: scale(1.03); box-shadow: 0 15px 40px rgba(0, 184, 233, 0.8); }
        }
        
        .filter-banner-container {
            background-image: url('https://placehold.co/1200x400/021625/ffffff?text=CLEAN+WATER+FOR+PAKISTAN'); 
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            border-radius: 0.75rem;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
            border: 4px solid #00b8e9;
            margin-bottom: 2rem;
        }

        .filter-banner-overlay {
            background-color: #021625; 
            backdrop-filter: blur(1px);
            padding: 1.5rem;
            text-align: center;
            color: white;
            width: 100%;
            height: 100%;
        }

        .neon-text {
            font-size: 1.5rem;
            font-weight: 900;
            letter-spacing: 1px;
            color: #00FFFF;
            text-shadow: 
                0 0 5px rgba(0, 255, 255, 0.7),
                0 0 10px rgba(0, 255, 255, 0.5),
                0 0 20px rgba(0, 255, 255, 0.3),
                0 0 40px #00FFFF;
            animation: neon-flicker 1.5s infinite alternate;
            padding: 1rem 0;
            line-height: 1.5;
        }

        .whatsapp-blink-button {
            background-color: #25D366;
            background-image: linear-gradient(to right, #128C7E, #25D366);
            animation: pulse-whatsapp 1.5s infinite;
            transition: all 0.2s;
            border: 3px solid white;
            font-weight: 800;
        }

        .whatsapp-blink-button:hover {
            animation: none;
            background-image: linear-gradient(to right, #128C7E, #128C7E);
            transform: scale(1.03);
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.6);
        }

        @keyframes pulse-whatsapp {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); transform: scale(1); }
            50% { box-shadow: 0 0 0 10px rgba(37, 211, 102, 0); transform: scale(1.02); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); transform: scale(1); }
        }
        
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header & Navigation -->
    <header class="header-bg shadow-xl sticky top-0 z-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-5 flex justify-between items-center flex-wrap">
            
            <h1 class="text-2xl sm:text-4xl font-black text-white tracking-wider transform hover:scale-105 transition-transform duration-300">
                PureFlow Pakistan üáµüá∞
            </h1>
            
            <button id="menu-button" class="md:hidden text-white p-2 rounded-lg hover:bg-white hover:bg-opacity-10 transition duration-150" aria-label="Toggle navigation menu">
                <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>

            <nav id="nav-menu" class="hidden w-full md:block md:w-auto mt-4 md:mt-0">
                <div class="space-y-2 md:space-y-0 md:space-x-4 flex flex-col md:flex-row items-center">
                    <a href="#home-filters" class="text-white hover:text-yellow-300 transition duration-150 font-medium p-2 rounded-lg hover:bg-white hover:bg-opacity-10 text-sm sm:text-base w-full text-center md:w-auto">Home Filters</a>
                    <a href="#commercial-plants" class="text-white hover:text-yellow-300 transition duration-150 font-medium p-2 rounded-lg hover:bg-white hover:bg-opacity-10 text-sm sm:text-base w-full text-center md:w-auto">Commercial Plants</a>
                    <a href="#marine-systems" class="text-white hover:text-yellow-300 transition duration-150 font-medium p-2 rounded-lg hover:bg-white hover:bg-opacity-10 text-sm sm:text-base w-full text-center md:w-auto">Marine Systems</a>
                    <a href="#accessories" class="text-white hover:text-yellow-300 transition duration-150 font-medium p-2 rounded-lg hover:bg-white hover:bg-opacity-10 text-sm sm:text-base w-full text-center md:w-auto">Accessories & Storage</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="max-w-7xl mx-auto p-4 sm:p-8 lg:p-10 flex-grow w-full">

        <!-- Banner for Service Inquiry -->
        <div class="filter-banner-container z-10">
            <div class="filter-banner-overlay">

                <p class="neon-text mx-auto mb-8 text-center text-xl sm:text-2xl lg:text-3xl">
                    üáµüá∞ **DELIVERY AVAILABLE ALL OVER PAKISTAN!** üöö Delivery charges will be finalized during the deal.
                </p>

                <div class="bg-white/95 text-[#00334C] p-5 sm:p-8 rounded-xl shadow-2xl mb-6 transform scale-[1.02]">
                    <p class="text-2xl sm:text-3xl font-extrabold mb-2 flex items-center justify-center">
                        <span class="text-4xl sm:text-5xl mr-3">üõ†Ô∏è</span> FULL SERVICE NOW AVAILABLE!
                    </p>
                    <p class="text-lg sm:text-xl font-medium mt-1">
                        Our Expert Team can also **Clean & Repair** your existing Home Filters and Commercial Plants.
                    </p>
                </div>
                
                <button id="serviceBlinkButton" onclick="handleServiceInquiry()" class="whatsapp-blink-button text-white py-3 px-8 rounded-full text-lg sm:text-xl font-extrabold w-full md:w-3/4 lg:w-1/2 mx-auto block shadow-lg">
                    Service Inquiry in 1 Click!
                </button>
                
            </div>
        </div>
        
        <!-- Deals Section -->
        <div id="deals-section" class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 mb-16">
            
            <div class="pak-flag-banner shadow-2xl">
                <div class="pak-flag-overlay p-6 sm:p-10 text-center h-full flex flex-col justify-center">
                    <h2 class="text-3xl sm:text-4xl font-extrabold text-white mb-4 leading-tight border-b-4 border-white/50 pb-3 inline-block mx-auto">
                        Community Water Service
                    </h2>
                    <p class="text-xl sm:text-2xl text-yellow-300 font-bold mb-6 mt-4">
                        Special Discount for Community Service!
                    </p>
                    <p class="text-5xl sm:text-7xl font-black text-white bg-green-800/40 py-2 px-6 rounded-xl mx-auto w-fit transform -skew-x-6 shadow-xl">
                        FLAT 20% OFF
                    </p>
                    <p class="text-base sm:text-lg text-white font-medium mt-6">
                        On all Filter Plants for **Charities & Mosques**
                    </p>
                </div>
            </div>

            <div class="special-deal-card p-6 sm:p-10 text-center text-white rounded-3xl shadow-2xl flex flex-col justify-center">
                <h2 class="text-3xl sm:text-4xl font-black mb-3">
                    FLASH SALE!
                </h2>
                <p class="text-xl sm:text-2xl font-semibold mb-6">
                    Be Quick and Grab Your Savings Today!
                </p>
                <div class="bg-white text-[#00334C] rounded-xl p-5 mb-6 shadow-inner">
                    <p class="text-6xl sm:text-8xl font-black tracking-tighter">
                        25%
                    </p>
                    <p class="text-xl sm:text-2xl font-extrabold -mt-3">
                        FLAT OFF
                    </p>
                </div>
                <p class="text-xl sm:text-2xl font-bold border-t pt-4">
                    For the **First 10 Customers ONLY!**
                </p>
            </div>
            
        </div>
        
        <!-- Product Listing Sections -->
        <div id="product-listing" class="space-y-16">
            <!-- Products will be rendered here by JavaScript -->
        </div>

    </main>
    
    <!-- Footer -->
    <footer class="footer-bg text-white py-10 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-10 text-center md:text-left">
            
            <div>
                <h3 class="text-2xl font-black mb-4 text-blue-300">PureFlow Pakistan</h3>
                <p class="text-gray-400 leading-relaxed text-sm sm:text-base">Your trusted partner for clean and reliable drinking water solutions in Pakistan. Best in quality, fair in price.</p>
                <p class="text-xs mt-4 text-gray-500">¬© 2024. All rights reserved.</p>
            </div>

            <div>
                <h3 class="text-2xl font-black mb-4 text-blue-300">Contact & Timing</h3>
                <div class="bg-cyan-800/60 p-5 rounded-xl border-l-4 border-cyan-400 shadow-2xl">
                    <p class="text-base text-gray-100 mb-3">
                        <span class="block text-cyan-200 font-semibold">Owner: M. Yousaf</span>
                    </p>
                    <p class="text-gray-200 mb-4">
                        <span class="block text-xs uppercase font-medium text-cyan-400">Inquiry Line (WhatsApp/Call):</span>
                        <a href="tel:+923164749076" class="text-xl sm:text-2xl font-extrabold text-white hover:text-cyan-300 transition-colors block mt-1">
                            +92 316 4749076
                        </a>
                    </p>

                    <h4 class="text-lg font-bold mt-4 mb-2 text-cyan-300 border-t border-cyan-700 pt-3">Business Hours</h4>
                    <p class="text-sm sm:text-base text-gray-200">
                        <span class="font-semibold block">Mon - Sat:</span> 10:00 AM - 8:00 PM
                        <span class="font-semibold block mt-1">Friday:</span> 2:00 PM - 8:00 PM
                    </p>
                </div>
            </div>

            <div>
                <h3 class="text-2xl font-black mb-4 text-blue-300">Our Address</h3>
                <p class="text-sm sm:text-base text-gray-300">
                    <span class="font-bold text-yellow-400">Main Ichra Filter Plant Market, Lahore</span>
                    <span class="block mt-2 text-xs text-gray-400">Please note: Inquiries must first be made by phone or WhatsApp before visiting.</span>
                </p>
            </div>
        </div>
    </footer>

    <!-- Modal for Product Details -->
    <div id="productDetailModal" class="fixed inset-0 hidden items-center justify-center z-40 modal-backdrop" onclick="closeModal()">
        <div class="bg-white rounded-3xl shadow-2xl m-4 w-full max-w-4xl max-h-[90vh] overflow-y-auto transform scale-100 transition-transform duration-300" 
             onclick="event.stopPropagation()">
            
            <div class="p-6 border-b border-gray-100 flex justify-between items-center bg-blue-50 rounded-t-3xl">
                <h3 id="modalProductName" class="text-2xl sm:text-3xl font-extrabold text-[#00334C]">Product Name</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-red-600 transition-colors">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <div class="p-4 sm:p-8 grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8">
                
                <div class="bg-gray-100 rounded-xl overflow-hidden shadow-lg image-container h-80 lg:h-96">
                    <!-- Added loading="lazy" for the modal image as well -->
                    <img id="modalProductImage" src="" alt="Product Image" class="w-full h-full object-cover" loading="lazy" onerror="this.onerror=null; this.src='https://placehold.co/800x600/FF0000/FFFFFF?text=IMAGE+ERROR+CONTACT+ADMIN'">
                    <p id="imagePlaceholderText" class="placeholder-text absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2">
                        Image Loading...
                    </p>
                </div>

                <div>
                    <div class="mb-4 sm:mb-6">
                        <p class="text-sm font-semibold uppercase text-gray-500 mb-1">Category:</p>
                        <p id="modalProductCategory" class="text-lg sm:text-xl font-medium text-blue-700">Category Name</p>
                    </div>

                    <div class="mb-4 sm:mb-6">
                        <p class="text-sm font-semibold uppercase text-gray-500 mb-1">Price:</p>
                        <p id="modalProductPrice" class="text-3xl sm:text-4xl font-extrabold text-green-600">PKR 0,000</p>
                    </div>
                    
                    <div class="mb-6 sm:mb-8">
                        <p class="text-sm font-semibold uppercase text-gray-500 mb-2">Description:</p>
                        <p id="modalProductDescription" class="text-base sm:text-lg text-gray-700 leading-relaxed"></p>
                    </div>

                    <button id="inquireButton" onclick="handleInquiry()" class="primary-button text-white py-3 px-8 rounded-xl text-lg w-full">
                        Contact via WhatsApp / SMS
                    </button>
                </div>
            </div>
            
        </div>
    </div>


    <script>
        // --- Configuration (All English) ---
        const OWNER_NAME = "M. Yousaf";
        const OWNER_PHONE_INTERNATIONAL = "923164749076"; 
        const OWNER_PHONE_DISPLAY = "+92 316 4749076";

        let currentProduct = null; 
        
        // --- PRODUCT DATA: Using functional RAW GITHUB LINKS ---
        const GITHUB_BASE = "https://raw.githubusercontent.com/bachamasti560-pixel/WaterFilter_Website/a5d0d742cbdfd2203b7a8514a459944944d641e4";

        const products = [
            // --- Home Filters ---
            { id: 1, name: "Domestic 5-Stage RO Filter System", category: "Home Filters", sectionId: "home-filters",
              description: "Standard filter for homes. Removes 99% of salts and contaminants, providing pure water. Capacity: 50 GPD (Gallons Per Day). Includes pre-filters, carbon block, RO membrane, and post-carbon filter. Ideal for an average family of 4.",
              price_pkr: "28,500",
              imageUrl: `${GITHUB_BASE}/Domestic%205-Stage%20RO%20Filter%20System.png` },

            { id: 2, name: "Luxury 7-Stage UV+RO Water Filter System", category: "Home Filters", sectionId: "home-filters",
              description: "Combines UV disinfection and RO technology for superior purification. Disinfects water from bacteria/viruses and improves taste. Ideal for larger households or areas with inconsistent water quality. Capacity: 75 GPD.",
              price_pkr: "38,000",
              imageUrl: `${GITHUB_BASE}/Luxury%207-Stage%20UV%2BRO%20Water%20Filter%20System.png` },

            // --- Commercial Plants ---
            { id: 3, name: "Mini Commercial RO Plant 1000 GPD", category: "Commercial Plants", sectionId: "commercial-plants",
              description: "A compact, high-output system for small businesses, offices, and mosques (20% discount applicable). Capacity to produce 1000 gallons per day. Features a robust stainless steel frame and a durable high-pressure pump for continuous operation.",
              price_pkr: "2,50,000",
              imageUrl: `${GITHUB_BASE}/Mini%20Commercial%20RO%20Plant%201000%20GPD.png` },

            { id: 4, name: "Industrial Mineral Water Plant 5000 GPD", category: "Commercial Plants", sectionId: "commercial-plants",
              description: "A complete solution ideal for bottling and dispenser businesses. Features high-quality membranes, advanced pre-treatment, and a post-mineralization stage to ensure excellent taste and compliance. Full installation services available.",
              price_pkr: "8,50,000",
              imageUrl: `${GITHUB_BASE}/Industrial%20Mineral%20Water%20Plant%205000%20GPD.png` },

            // --- Marine Systems (Desalination) ---
            { id: 5, name: "Marine Water Desalination System for Seawater", category: "Marine Systems", sectionId: "marine-systems",
              description: "Specialized system designed to convert high-salinity seawater into potable drinking water for boats, ships, and remote coastal areas. Uses specialized high-pressure membranes. Low energy consumption and excellent salt rejection rate.",
              price_pkr: "12,00,000",
              imageUrl: `${GITHUB_BASE}/Marine%20Water%20Desalination%20System%20for%20Seawater.png` },
            
            // --- Accessories & Spares (Existing) ---
            { id: 6, name: "Sediment Filter Cartridge 10 Inch", category: "Accessories & Storage", sectionId: "accessories",
              description: "The initial stage of filtration, critical for removing large suspended particles like sand, silt, and rust from the feed water. This protects the life of the RO membrane. Suitable for all standard 10-inch housing units.",
              price_pkr: "950",
              imageUrl: `${GITHUB_BASE}/Sediment%20Filter%20Cartridge%2010%20Inch.jpeg` },
            
            { id: 7, name: "Granular Activated Carbon Filter (GAC)", category: "Accessories & Storage", sectionId: "accessories",
              description: "Granular Activated Carbon (GAC) filter used for effective removal of chlorine, organic chemicals, improving odor, and enhancing the overall taste of the water. Must be replaced regularly.",
              price_pkr: "1,200",
              imageUrl: `${GITHUB_BASE}/Granular%20Activated%20Carbon%20Filter%20(GAC).jpeg` },
            
            { id: 8, name: "RO Membrane 50 GPD (Thin-Film Composite)", category: "Accessories & Storage", sectionId: "accessories",
              description: "The core component of the Reverse Osmosis system. This Thin-Film Composite (TFC) membrane rejects up to 99% of dissolved solids, heavy metals, and micro-contaminants. Capacity rated at 50 Gallons Per Day.",
              price_pkr: "3,500",
              imageUrl: `${GITHUB_BASE}/RO%20Membrane%2050%20GPD%20(Thin-Film%20Composite).png` },

            // --- Water Tank Range ---
            { id: 9, name: "High-Quality 3-Layer Water Storage Tank 500 Liters", category: "Accessories & Storage", sectionId: "accessories",
              description: "Ideal for overhead domestic use (approx. 130 Gallons). Made with three durable layers for UV protection, preventing algae formation, and providing moderate temperature insulation. Reliable and long-lasting for Pakistani households.",
              price_pkr: "12,500",
              imageUrl: `${GITHUB_BASE}/High-Quality%203-Layer%20Water%20Storage%20Tank%20500%20Liters.png` },

            { id: 10, name: "Heavy Duty Commercial Water Storage Tank 500 Gallons", category: "Accessories & Storage", sectionId: "accessories",
              description: "Durable 4-layer tank suitable for medium-sized buildings, small factories, or filtration plant storage. Excellent chemical resistance and extra-thick walls for maximum durability in harsh environments.",
              price_pkr: "41,000",
              imageUrl: `${GITHUB_BASE}/Heavy%20Duty%20Commercial%20Water%20Storage%20Tank%20500%20Gallons.png` },

            { id: 11, name: "Large Capacity Industrial Water Storage Tank 1000 Gallons", category: "Accessories & Storage", sectionId: "accessories",
              description: "Highest capacity tank for large commercial setups, apartments, and industrial water storage. Designed for stability and longevity. Perfect for storing large volumes of filtered or raw water.",
              price_pkr: "72,000",
              imageUrl: `${GITHUB_BASE}/Large%20Capacity%20Industrial%20Water%20Storage%20Tank%201000%20Gallons.png` },
        ];


        // --- Core Functions ---

        function groupProducts(products) {
            return products.reduce((acc, product) => {
                const key = product.sectionId;
                if (!acc[key]) {
                    acc[key] = {
                        title: product.category,
                        id: key,
                        products: []
                    };
                }
                acc[key].products.push(product);
                return acc;
            }, {});
        }

        // Function to render product sections and cards
        function renderProducts(products) {
            const grouped = groupProducts(products);
            const container = document.getElementById('product-listing');
            container.innerHTML = '';

            for (const key in grouped) {
                const section = grouped[key];
                
                // Section Title and Anchor
                const sectionHtml = document.createElement('section');
                sectionHtml.id = section.id;
                sectionHtml.classList.add('pt-4');
                sectionHtml.innerHTML = `
                    <h2 class="section-title text-3xl sm:text-4xl font-extrabold pb-3 mb-8 border-b-4">
                        ${section.title}
                    </h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 sm:gap-8" id="section-grid-${section.id}">
                    </div>
                `;
                container.appendChild(sectionHtml);

                const gridContainer = document.getElementById(`section-grid-${section.id}`);

                // Render each product card
                section.products.forEach(product => {
                    const imageId = `product-img-${product.id}`;
                    
                    const cardHtml = `
                        <div class="card p-6 flex flex-col">
                            <div class="image-container h-56 mb-5 rounded-xl overflow-hidden shadow-lg relative">
                                <img id="${imageId}" 
                                    src="${product.imageUrl}" 
                                    alt="${product.name}" 
                                    class="w-full h-full object-cover"
                                    loading="lazy"
                                    onerror="this.onerror=null; this.src='https://placehold.co/800x600/FF0000/FFFFFF?text=IMAGE+ERROR+CONTACT+ADMIN'; this.classList.add('p-4');"
                                >
                            </div>

                            <h3 class="text-xl sm:text-2xl font-bold text-[#00334C] mb-2">${product.name}</h3> 
                            <p class="text-gray-600 mb-5 flex-grow text-sm sm:text-base">${product.description.split('.')[0]}.</p>
                            <div class="mt-auto border-t border-gray-100 pt-5 flex justify-between items-center">
                                <span class="text-xl sm:text-2xl font-extrabold text-green-600">
                                    PKR ${product.price_pkr}
                                </span>
                                <button class="card-button text-white py-2 px-5 rounded-full shadow-lg text-sm sm:text-base" 
                                    onclick="showProductDetails(${product.id})">
                                    View Details
                                </button>
                            </div>
                        </div>
                    `;
                    gridContainer.insertAdjacentHTML('beforeend', cardHtml);
                });
            }
        }
        
        // --- Modal Functions ---

        function showProductDetails(productId) {
            const product = products.find(p => p.id === productId);

            if (!product) {
                console.error("Product not found for ID:", productId);
                return;
            }

            // Populate Modal Content
            document.getElementById('modalProductName').textContent = product.name;
            document.getElementById('modalProductCategory').textContent = product.category;
            document.getElementById('modalProductPrice').textContent = `PKR ${product.price_pkr}`;
            document.getElementById('modalProductDescription').textContent = product.description;
            
            // Set the image in the modal
            const modalImageElement = document.getElementById('modalProductImage');
            const placeholderTextElement = document.getElementById('imagePlaceholderText');
            
            // Set the final image source
            const finalSrc = product.imageUrl;

            modalImageElement.src = finalSrc;
            modalImageElement.alt = product.name;
            
            // Hide placeholder text and ensure image is not in error mode initially
            placeholderTextElement.classList.add('hidden');
            modalImageElement.classList.remove('p-4'); // Remove error padding if any

            // Store the product object globally for use by handleInquiry
            currentProduct = product; 

            // Display Modal
            const modal = document.getElementById('productDetailModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeModal() {
            const modal = document.getElementById('productDetailModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
            document.body.style.overflow = ''; // Restore background scrolling
        }
        
        function handleInquiry() {
            if (!currentProduct) {
                console.error("No product selected for inquiry.");
                return;
            }

            const productName = currentProduct.name;
            const productPrice = currentProduct.price_pkr;
            
            // Craft a professional, pre-filled message
            const messageText = `Hello, I am interested in this product: ${productName} (Price: PKR ${productPrice}). Kindly provide further details and confirmation of availability. Thank you!`;
            
            // WhatsApp Link
            const whatsappUrl = `https://wa.me/${OWNER_PHONE_INTERNATIONAL}?text=${encodeURIComponent(messageText)}`;
            
            // Open WhatsApp link immediately
            window.open(whatsappUrl, '_blank');
            
            closeModal();
        }

        function handleServiceInquiry() {
            // Craft a professional, pre-filled message for cleaning/repair service
            const messageText = `Hello, I require cleaning and repair services for my existing water filter/commercial plant. Please send an engineer and confirm the service charges. Thank you!`;
            
            // WhatsApp Link
            const whatsappUrl = `https://wa.me/${OWNER_PHONE_INTERNATIONAL}?text=${encodeURIComponent(messageText)}`;
            
            // Open WhatsApp link immediately
            window.open(whatsappUrl, '_blank');
        }

        // --- Menu Toggler Function ---
        function toggleMenu() {
            const navMenu = document.getElementById('nav-menu');
            navMenu.classList.toggle('hidden');
            
            // Close the menu if a link is clicked
            document.querySelectorAll('#nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth < 768) { // md breakpoint is 768px
                        navMenu.classList.add('hidden');
                    }
                });
            });
        }


        // Initial rendering and event listeners on page load
        window.onload = () => {
            renderProducts(products);
            document.getElementById('menu-button').addEventListener('click', toggleMenu);
        };
    </script>
</body>
</html>
